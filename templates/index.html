{% extends "base.html" %}

{% block title %}OBO Community Health{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function () {
        $("#table-ontologies").DataTable({
            "order": [[3, "desc"]]
        });
    })
</script>
{% endblock %}

{% block content %}
<div class="container">
    <h1 align="center">OBO Community Health</h1>
    <p>
        This page gives insight into which OBO Foundry ontologies are actively being updated and feedback
        given to users. It was generated using the GitHub API with scripts at
        <a href="https://github.com/cthoyt/obo-community-health">https://github.com/cthoyt/obo-community-health</a>.
    </p>
    <table class="table table-striped table-hover" id="table-ontologies">
        <thead>
        <tr style="text-align: right;">
            <th>ID</th>
            <th>Name</th>
            <th>Repository</th>
            <th>Stars</th>
            <th>Open Issues</th>
            <th>OBO Topic</th>
            <th>License</th>
            <th>Recently Pushed</th>
            <th>Recently Interacted</th>
        </tr>
        </thead>
        <tbody>
        {% for _, row in df.iterrows() %}
        <tr>
            <td>
                <a href="http://www.obofoundry.org/ontology/{{ row.prefix }}">
                    {{ row.prefix }}
                </a>
            </td>
            <td>{{ row.title }}</td>
            <td>
                <a href="https://github.com/{{ row.owner }}/{{ row.repo }}">
                    {{ row.owner }}/{{ row.repo }}
                </a>
            </td>
            <td align="right">{{ row.stars }}</td>
            <td align="right">{{ row.open_issues }}</td>
            <td>{{ row.has_obofoundry_topic }}</td>
            <td>{% if row.license %}{{ row.license }}{% endif %}</td>
            <td>{% if row.pushed_last_year %}{{ row.pushed_last_year }}{% endif %}</td>
            <td>{% if row.last_close_last_year %}{{ row.last_close_last_year }}{% endif %}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
